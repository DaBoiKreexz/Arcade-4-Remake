<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Arcade-4 Remake</title>
  <style>
    body { margin:0; font-family:Arial,sans-serif; background:#111; color:#eee; }
    nav { background:#222; display:flex; justify-content:center; padding:10px; }
    nav button { background:none; border:none; color:#eee; font-size:18px; margin:0 20px; cursor:pointer; }
    nav button:hover { color:#ffcc00; }
    section { display:none; padding:20px; text-align:center; }
    section.active { display:block; }
    .rainbow { font-size:48px; font-weight:bold;
      background:linear-gradient(to right,red,orange,yellow,green,blue,indigo,violet);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent;
      animation:rainbowMove 5s linear infinite; }
    @keyframes rainbowMove { from{background-position:0;} to{background-position:200%;} }
    .game-card { margin:20px auto; }
    .game-card button { padding:10px 20px; background:#ffcc00; border:none; border-radius:5px; cursor:pointer; font-weight:bold; }
    .game-card button:hover { background:#fff; color:#000; }
    .settings-control { margin:10px; }
    .gameview { width:100%; height:90vh; background:#000; }
    .back-btn { margin:10px; padding:8px 16px; background:#ffcc00; border:none; border-radius:5px; cursor:pointer; }
    #gameFrame { width:640px; height:480px; border:2px solid #fff; margin:20px auto; display:block; }
    #gameContainer { width:640px; height:480px; margin:auto; }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav id="mainNav">
    <button onclick="showSection('home')">Home</button>
    <button onclick="showSection('games')">Games</button>
    <button onclick="showSection('settings')">Settings</button>
  </nav>

  <!-- Home -->
  <section id="home" class="active">
    <h1 class="rainbow">Arcade 4 Remake</h1>
    <p>Welcome to your arcade hub!</p>
  </section>

  <!-- Games -->
  <section id="games">
    <div class="game-card">
      <button onclick="playGame('fnaf')">Play FNAF 1</button>
    </div>
    <div class="game-card">
      <button onclick="playGame('snowrider')">Play Snow Rider 3D</button>
    </div>
  </section>

  <!-- Settings -->
  <section id="settings">
    <h2>Settings</h2>
    <div class="settings-control">
      <label>Background Color: <input type="color" onchange="document.body.style.background=this.value" value="#111"></label>
    </div>
    <div class="settings-control">
      <label>Text Color: <input type="color" onchange="document.body.style.color=this.value" value="#eeeeee"></label>
    </div>
  </section>

  <!-- Game Views -->
  <section id="fnaf" class="gameview">
    <button class="back-btn" onclick="stopGame('fnaf')">⬅ Back to Arcade</button>
    <iframe id="gameFrame" src="" frameborder="0"></iframe>
  </section>

  <section id="snowrider" class="gameview">
    <button class="back-btn" onclick="stopGame('snowrider')">⬅ Back to Arcade</button>
    <div id="gameContainer"></div>
  </section>

  <!-- Unity Loader -->
  <script src="https://cdn.jsdelivr.net/gh/era6yera6y/00@main/TemplateData/UnityProgress.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/era6yera6y/00@main/Build/UnityLoader.js"></script>
  <script>
    let gameInstance = null;

    function showSection(id){
      // stop any running games when leaving
      stopGame('fnaf');
      stopGame('snowrider');
      document.querySelectorAll('section').forEach(sec=>sec.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    function playGame(id){
      showSection(id);
      if(id==='fnaf'){
        document.getElementById("gameFrame").src="games/FNAF1/index.html";
      }
      if(id==='snowrider'){
        gameInstance = UnityLoader.instantiate("gameContainer",
          "https://cdn.jsdelivr.net/gh/era6yera6y/00@main/Build/SnowRider3D-gd-1.json",
          {onProgress:UnityProgress});
      }
    }

    function stopGame(id){
      if(id==='fnaf'){
        document.getElementById("gameFrame").src="";
      }
      if(id==='snowrider' && gameInstance){
        try { gameInstance.Quit(); } catch(e){}
        gameInstance = null;
        document.getElementById("gameContainer").innerHTML="";
      }
    }
  </script>
</body>
</html>
